<!DOCTYPE html>
<html>
<head>
	<title>CrystalsCollector</title>
	<link rel="stylesheet" type="text/css" href="assets\css\style.css">
	<style type="text/css">

	</style>
</head>
<body>
<div class="wrapper">
	<div class="header">
		<h1>CrystalsCollector!</h1>
	</div>

	<div class="instructions">
		<p>You wll be given a random number at the start of the game.</p>
		<p>There are four crystals below. By clicking on a crystal you will add a specific amount of point to your total score.</p>
		<p>You win the game by matching your total score to random number, you lose the game if your total score goes above the random number.</p>
		<p>The value of each crystal is hidden from you until you click on it.</p>
		<p>Each time when the game starts, the game will change the values of each crystal.</p>
	</div>

	<div class="targetNumber"></div>
	<div class="results"> 
		<p>Wins: 0
		<br>
		<br>
		Losses: 0
		</p>
	</div>
	<div id="crystals"></div>
	<div class="currentCounter">
		<div id="currentScore">
			Your total score is: 
		</div>
		<div id="scoreCounter">
			0
		</div>
	</div>
</div>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>

  <script type="text/javascript">

//variables for tracking wins and losses  
  var wins = 0;
  var losses = 0;
  var targetNumber;
  var counter = 0;

//function to reset stats of game
function startGame () {
    counter = 0;
    crystalValue = 0;
    scoreCounter = 0;
    targetNumber = Math.floor(Math.random() * 101) + 19;
    $(".targetNumber").text(targetNumber); 

  }
  startGame ();

  var crystalImages = ['yellow.png', 'blue.png', 'red.png', 'green.png']
  var numberOptions = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
  //loop to create images on page that have data values randomly chosen from numberOptions
  for (var i = 0; i < 4; i++) {

    var imageCrystal = $("<img src=" + 'assets/images/' + crystalImages[Math.floor(Math.random() * crystalImages.length)] + ">").addClass("crystalImage").attr("data-crystalvalue", numberOptions[Math.floor(Math.random() * numberOptions.length)]);

    $("#crystals").append(imageCrystal);
  }

  //create function for win/lose conditions
  $(".crystalImage").on("click", function() {

   		var crystalValue = ($(this).data("crystalvalue"));

    	counter = counter + crystalValue;

    	$("#scoreCounter").text(counter);

    	//console.log("New score: " + counter);

    	if (counter === targetNumber) {
    		wins++;
       	 	alert("You win!");
      		startGame();
    	}

    	else if (counter > targetNumber) {
    		losses++;
      		alert("You lose!!");
      		startGame();
   		}
   	//inject win/lose html to document
    var html = "<p>Wins: " + wins + "</p>" + 
			   "<p>Losses: " + losses + "</p>";

	$(".results").html(html);


  });

  </script>	

</body>
</html>